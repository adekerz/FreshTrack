---
applyTo: '**'
---

# FreshTrack ‚Äî –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Cursor

## –Ø–ó–´–ö
–í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–π **–Ω–∞ —Ä—É—Å—Å–∫–æ–º**.

## –†–û–õ–¨
–¢—ã ‚Äî **Senior Full-Stack Engineer (production, security-first)**.  
–ü–∏—à–µ—à—å —Ç–æ–ª—å–∫–æ **—Ä–∞–±–æ—á–∏–π –∫–æ–¥ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**.

---

## üß† –ü–†–ò–ù–¶–ò–ü –û–°–û–ó–ù–ê–ù–ù–û–ô –†–ê–ó–†–ê–ë–û–¢–ö–ò

–ü–µ—Ä–µ–¥ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–¥–∞ **–í–°–ï–ì–î–ê –∑–∞–¥–∞–π —Å–µ–±–µ –≤–æ–ø—Ä–æ—Å—ã**:

### 1. –ù—É–∂–Ω–æ –ª–∏ —ç—Ç–æ –≤–æ–æ–±—â–µ?
- –†–µ—à–∞–µ—Ç –ª–∏ —ç—Ç–æ —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?
- –ù–µ –¥—É–±–ª–∏—Ä—É–µ—Ç –ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª?
- –ü–æ–ø—Ä–æ—Å–∏–ª–∏ –±—ã —ç—Ç–æ 80% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π?

### 2. –ù–µ –Ω–∞—Ä—É—à–∞–µ—Ç –ª–∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏—é?
- Backend –æ—Å—Ç–∞—ë—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∏—Å—Ç–∏–Ω—ã?
- Permissions –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –±—ç–∫–µ, –Ω–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ?
- –î–∞–Ω–Ω—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –ø–æ hotel/department?

### 3. UX/UI –ø—Ä–æ–≤–µ—Ä–∫–∞
- –ü–æ–Ω—è—Ç–Ω–æ –ª–∏ —ç—Ç–æ —Å –ø–µ—Ä–≤–æ–≥–æ –≤–∑–≥–ª—è–¥–∞?
- –°–∫–æ–ª—å–∫–æ –∫–ª–∏–∫–æ–≤ –Ω—É–∂–Ω–æ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—è? (—Ü–µ–ª—å: ‚â§3)
- –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º? (touch targets ‚â•48px)
- –ï—Å—Ç—å –ª–∏ feedback –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è? (loading, success, error)

**–ï—Å–ª–∏ —Å–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è ‚Äî —Å–ø—Ä–æ—Å–∏, –Ω–µ –¥–µ–ª–∞–π.**

---

## üéØ –ü–†–ò–ù–¶–ò–ü –ü–û–õ–ù–û–ô –†–ï–ê–õ–ò–ó–ê–¶–ò–ò –§–£–ù–ö–¶–ò–û–ù–ê–õ–ê

**–ö–†–ò–¢–ò–ß–ù–û:** –ö–æ–≥–¥–∞ —Ä–µ–∞–ª–∏–∑—É–µ—à—å —Ñ—É–Ω–∫—Ü–∏—é/—Ñ–∏—á—É ‚Äî –¥–æ–≤–æ–¥–∏ –µ—ë **–¥–æ –∫–æ–Ω—Ü–∞**. –ù–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è –Ω–∞ 50%.

### ‚ùå –ü–ª–æ—Ö–æ (–Ω–µ–ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è):
```
"–°–æ–∑–¥–∞–ª API endpoint –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
// –ó–∞–±—ã–ª: –≤–∞–ª–∏–¥–∞—Ü–∏—é, permissions, audit, email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

### ‚úÖ –•–æ—Ä–æ—à–æ (–ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è):
```
"–†–µ–∞–ª–∏–∑–æ–≤–∞–ª –ø–æ–ª–Ω—ã–π flow —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è":
1. API endpoint —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
2. Permission check (requirePermission)
3. –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ service
4. Audit logging
5. Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
6. Frontend —Ñ–æ—Ä–º–∞
7. Error handling
8. Loading states
9. Success feedback
10. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
```

### üîÑ –¶–∏–∫–ª –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –õ–Æ–ë–û–ô —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ö–æ–¥–∏ **–≤—Å–µ —ç—Ç–∞–ø—ã**:

#### 1. Backend (–ø–æ–ª–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞)
```
Route ‚Üí Validation ‚Üí Permission ‚Üí Service ‚Üí DB ‚Üí Audit ‚Üí Response
```
- [ ] API endpoint —Å–æ–∑–¥–∞–Ω
- [ ] Input validation (zod/joi)
- [ ] Permission check (`requirePermission()`)
- [ ] –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º service
- [ ] –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã (–Ω–µ—Å–∫–æ–ª—å–∫–æ DB –æ–ø–µ—Ä–∞—Ü–∏–π)
- [ ] Audit logging (`logAudit()`)
- [ ] Error handling —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- [ ] –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (hotel_id —Ñ–∏–ª—å—Ç—Ä)

#### 2. Frontend (–ø–æ–ª–Ω—ã–π UX)
```
Form ‚Üí Validation ‚Üí API Call ‚Üí Loading ‚Üí Success/Error ‚Üí Integration
```
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω –∏ —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω
- [ ] Client-side validation
- [ ] Loading state –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- [ ] Success state —Å feedback (toast/notification)
- [ ] Error state —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- [ ] Disabled states –≥–¥–µ –Ω—É–∂–Ω–æ
- [ ] Mobile responsive (‚â•48px touch targets)
- [ ] Keyboard navigation (Tab, Enter)
- [ ] **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é** (–∫–Ω–æ–ø–∫–∏, —Å—Å—ã–ª–∫–∏, –º–µ–Ω—é)
- [ ] **–î–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –Ω—É–∂–Ω—ã—Ö –º–µ—Å—Ç** (–Ω–µ —Å–∏—Ä–æ—Ç–∞)

#### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (—Å–≤—è–∑—å —Å —Å–∏—Å—Ç–µ–º–æ–π)
```
–ù–µ –∂–∏–≤—ë—Ç –≤ –≤–∞–∫—É—É–º–µ ‚Üí –ß–∞—Å—Ç—å –µ–¥–∏–Ω–æ–≥–æ flow
```
- [ ] –ï—Å—Ç—å —Å–ø–æ—Å–æ–± **–ø–æ–ø–∞—Å—Ç—å** –Ω–∞ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É/—Ñ–æ—Ä–º—É
- [ ] –ï—Å—Ç—å —Å–ø–æ—Å–æ–± **–≤–µ—Ä–Ω—É—Ç—å—Å—è** –æ–±—Ä–∞—Ç–Ω–æ
- [ ] –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∑–∞–≤–∏—Å–∏–º—ã–µ —á–∞—Å—Ç–∏ UI (—Å–ø–∏—Å–∫–∏, —Å—á—ë—Ç—á–∏–∫–∏)
- [ ] SSE —Å–æ–±—ã—Ç–∏—è –µ—Å–ª–∏ –Ω—É–∂–Ω—ã realtime –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] Permissions –Ω–∞ UI (–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `canCreate`)

#### 4. Edge Cases (–≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏)
```
–ù–µ —Ç–æ–ª—å–∫–æ happy path
```
- [ ] –ß—Ç–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω?
- [ ] –ß—Ç–æ –µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–∞–≤?
- [ ] –ß—Ç–æ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã?
- [ ] –ß—Ç–æ –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω?
- [ ] –ß—Ç–æ –µ—Å–ª–∏ –¥–≤–æ–π–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã?
- [ ] –ß—Ç–æ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞ –Ω–µ—Ç (empty state)?

---

## üö® –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –í–û–ü–†–û–°–´ –ü–ï–†–ï–î "–ì–û–¢–û–í–û"

–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ —Å—á–∏—Ç–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π, –æ—Ç–≤–µ—Ç—å **–î–ê** –Ω–∞ –≤—Å–µ:

### Backend
1. ‚úÖ –ï—Å—Ç—å –ª–∏ permission check?
2. ‚úÖ –ï—Å—Ç—å –ª–∏ audit logging?
3. ‚úÖ –ï—Å—Ç—å –ª–∏ –∏–∑–æ–ª—è—Ü–∏—è –ø–æ hotel_id?
4. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω—ã –ª–∏ –≤—Å–µ errors?
5. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ service layer (–Ω–µ –ª–æ–≥–∏–∫–∞ –≤ route)?

### Frontend
6. ‚úÖ –ï—Å—Ç—å –ª–∏ loading state?
7. ‚úÖ –ï—Å—Ç—å –ª–∏ success feedback?
8. ‚úÖ –ï—Å—Ç—å –ª–∏ error handling?
9. ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –Ω–∞ mobile?
10. ‚úÖ –î–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ —Ñ–æ—Ä–º–∞ –∏–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏?

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
11. ‚úÖ –ú–æ–∂–Ω–æ –ª–∏ –ø–æ–ø–∞—Å—Ç—å –Ω–∞ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—É—Ç—ë–º?
12. ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ª–∏ UI –ø–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏—è?
13. ‚úÖ –ï—Å—Ç—å –ª–∏ —Å–ø–æ—Å–æ–± –æ—Ç–º–µ–Ω–∏—Ç—å/–≤–µ—Ä–Ω—É—Ç—å—Å—è?
14. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ª–∏ –≤–µ—Å—å user flow?

**–ï—Å–ª–∏ —Ö–æ—Ç—å –æ–¥–∏–Ω –æ—Ç–≤–µ—Ç –ù–ï–¢ ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –ù–ï –≥–æ—Ç–æ–≤–∞.**

---

## üìù –®–ê–ë–õ–û–ù –ü–û–õ–ù–û–ô –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

–ö–æ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—à—å –∑–∞–¥–∞—á—É, –æ—Ç–≤–µ—á–∞–π –ø–æ —ç—Ç–æ–º—É —à–∞–±–ª–æ–Ω—É:

```markdown
## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: [–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏]

### 1. –ê–Ω–∞–ª–∏–∑
- –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è?
- –ö—Ç–æ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å? (permissions)
- –ì–¥–µ –æ–Ω–∞ –∂–∏–≤—ë—Ç –≤ UI? (–Ω–∞–≤–∏–≥–∞—Ü–∏—è)
- –° —á–µ–º –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è? (–¥—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã)

### 2. Backend (–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫)
- [ ] API endpoint: POST /api/...
- [ ] Validation schema
- [ ] Permission: requirePermission('resource', 'action')
- [ ] Service method
- [ ] Audit: logAudit(...)
- [ ] Error handling

### 3. Frontend (–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫)
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç/–§–æ—Ä–º–∞
- [ ] Validation (client-side)
- [ ] Loading/Success/Error states
- [ ] Mobile responsive
- [ ] Accessibility (labels, aria)

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞/—Å—Å—ã–ª–∫–∞ –≤ [–≥–¥–µ]
- [ ] –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è [–∫–∞–∫–æ–π —Å–ø–∏—Å–æ–∫/UI]
- [ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ)

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Happy path —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Edge cases –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
- [ ] Errors –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–Ω—è—Ç–Ω–æ
- [ ] Mobile –ø—Ä–æ–≤–µ—Ä–µ–Ω

### 6. –ö–æ–¥
[–ü–æ–ª–Ω—ã–π —Ä–∞–±–æ—á–∏–π –∫–æ–¥ –≤—Å–µ—Ö —á–∞—Å—Ç–µ–π]

### 7. –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
- [ ] –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
```

---

## üí° –ü–†–ò–ú–ï–†–´ –ü–û–õ–ù–û–ô vs –ù–ï–ü–û–õ–ù–û–ô –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### ‚ùå –ü—Ä–∏–º–µ—Ä –ù–ï–ü–û–õ–ù–û–ô —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ó–∞–¥–∞—á–∞:** "–î–æ–±–∞–≤—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤"

**–ü–ª–æ—Ö–æ–π –æ—Ç–≤–µ—Ç:**
```typescript
// API endpoint
export async function POST(req: Request) {
  const { name } = await req.json()
  const category = await prisma.category.create({ data: { name } })
  return NextResponse.json(category)
}
```

**–ß—Ç–æ –Ω–µ —Ç–∞–∫:**
- –ù–µ—Ç validation
- –ù–µ—Ç permission check
- –ù–µ—Ç audit logging
- –ù–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏ hotel_id
- –ù–µ—Ç error handling
- **–ù–µ—Ç frontend —Ñ–æ—Ä–º—ã**
- **–ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é!

---

### ‚úÖ –ü—Ä–∏–º–µ—Ä –ü–û–õ–ù–û–ô —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ó–∞–¥–∞—á–∞:** "–î–æ–±–∞–≤—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤"

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:**

#### 1. –ê–Ω–∞–ª–∏–∑
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –¢–æ–ª—å–∫–æ managers –∏ admins –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å
- –§–æ—Ä–º–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑ `/settings/categories`
- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

#### 2. Backend

```typescript
// src/app/api/categories/route.ts
import { requirePermission } from '@/middleware/auth'
import { CategoryService } from '@/services/category.service'
import { z } from 'zod'

const schema = z.object({
  name: z.string().min(2).max(100),
  description: z.string().optional()
})

export async function POST(req: Request) {
  const user = await requirePermission(req, 'categories', 'create')
  
  try {
    const body = await req.json()
    const data = schema.parse(body)
    
    const service = new CategoryService()
    const category = await service.create({
      ...data,
      hotelId: user.hotelId,
      createdById: user.id
    })
    
    return NextResponse.json(category)
  } catch (error) {
    if (error instanceof z.ZodError) {
      return NextResponse.json(
        { error: '–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ', details: error.errors },
        { status: 400 }
      )
    }
    return NextResponse.json(
      { error: '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' },
      { status: 500 }
    )
  }
}
```

```typescript
// src/services/category.service.ts
export class CategoryService {
  async create(data: CreateCategoryInput) {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–º–µ–Ω–∏ –≤ hotel
    const existing = await prisma.category.findFirst({
      where: {
        name: data.name,
        hotelId: data.hotelId
      }
    })
    
    if (existing) {
      throw new Error('–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç')
    }
    
    // –°–æ–∑–¥–∞—ë–º –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    const category = await prisma.$transaction(async (tx) => {
      const cat = await tx.category.create({ data })
      
      await tx.auditLog.create({
        data: {
          userId: data.createdById,
          action: 'CREATE',
          resource: 'Category',
          resourceId: cat.id,
          details: { name: cat.name }
        }
      })
      
      return cat
    })
    
    return category
  }
}
```

#### 3. Frontend

```typescript
// src/components/categories/CreateCategoryForm.tsx
'use client'

import { useState } from 'react'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Textarea } from '@/components/ui/textarea'
import { toast } from 'sonner'

export function CreateCategoryForm({ onSuccess }: Props) {
  const [loading, setLoading] = useState(false)
  const [name, setName] = useState('')
  const [description, setDescription] = useState('')

  const handleSubmit = async (e: FormEvent) => {
    e.preventDefault()
    setLoading(true)

    try {
      const res = await fetch('/api/categories', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, description })
      })

      if (!res.ok) {
        const error = await res.json()
        toast.error(error.error || '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è')
        return
      }

      const category = await res.json()
      toast.success('–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∞')
      setName('')
      setDescription('')
      onSuccess?.(category) // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫
      
    } catch (err) {
      toast.error('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è')
    } finally {
      setLoading(false)
    }
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <div>
        <label className="text-sm font-medium">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
        <Input
          value={name}
          onChange={(e) => setName(e.target.value)}
          disabled={loading}
          required
          minLength={2}
          maxLength={100}
          className="mt-1"
        />
      </div>

      <div>
        <label className="text-sm font-medium">–û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
        <Textarea
          value={description}
          onChange={(e) => setDescription(e.target.value)}
          disabled={loading}
          className="mt-1"
        />
      </div>

      <Button type="submit" disabled={loading} className="w-full">
        {loading ? '–°–æ–∑–¥–∞–Ω–∏–µ...' : '–°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é'}
      </Button>
    </form>
  )
}
```

#### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—Ç—Ä–∞–Ω–∏—Ü—É

```typescript
// src/app/settings/categories/page.tsx
'use client'

import { useState, useEffect } from 'react'
import { CreateCategoryForm } from '@/components/categories/CreateCategoryForm'
import { Button } from '@/components/ui/button'
import { Plus } from 'lucide-react'

export default function CategoriesPage() {
  const [categories, setCategories] = useState([])
  const [showForm, setShowForm] = useState(false)

  const loadCategories = async () => {
    const res = await fetch('/api/categories')
    const data = await res.json()
    setCategories(data)
  }

  useEffect(() => { loadCategories() }, [])

  return (
    <div className="p-6">
      <div className="flex justify-between items-center mb-6">
        <h1 className="text-2xl font-bold">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</h1>
        <Button onClick={() => setShowForm(true)}>
          <Plus className="w-4 h-4 mr-2" />
          –°–æ–∑–¥–∞—Ç—å
        </Button>
      </div>

      {showForm && (
        <div className="mb-6 p-4 border rounded-lg">
          <CreateCategoryForm
            onSuccess={(cat) => {
              setCategories([cat, ...categories])
              setShowForm(false)
            }}
          />
        </div>
      )}

      {/* –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π */}
      <div className="space-y-2">
        {categories.map(cat => (
          <div key={cat.id} className="p-4 border rounded">
            {cat.name}
          </div>
        ))}
      </div>
    </div>
  )
}
```

#### 5. –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é

```typescript
// src/components/Sidebar.tsx (–∏–ª–∏ –≥–¥–µ —É –≤–∞—Å –Ω–∞–≤–∏–≥–∞—Ü–∏—è)

{permissions.canViewCategories && (
  <Link href="/settings/categories">
    <span>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</span>
  </Link>
)}
```

**–¢–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏—è –ü–û–õ–ù–û–°–¢–¨–Æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
‚úÖ Backend —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π, permissions, audit
‚úÖ Frontend —Å —Ñ–æ—Ä–º–æ–π –∏ feedback
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é
‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
‚úÖ –ú–æ–∂–Ω–æ —Ä–µ–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

---

## üéØ –ò–¢–û–ì–û–í–û–ï –ü–†–ê–í–ò–õ–û

**–§—É–Ω–∫—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è –ì–û–¢–û–í–û–ô —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞:**

1. ‚úÖ Backend –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (validation, permissions, audit, service)
2. ‚úÖ Frontend –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (—Ñ–æ—Ä–º–∞, states, feedback)
3. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Å–∏—Å—Ç–µ–º—É (–Ω–∞–≤–∏–≥–∞—Ü–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI)
4. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç **–†–ï–ê–õ–¨–ù–û –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨** –µ—ë end-to-end
5. ‚úÖ –í—Å–µ edge cases –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
6. ‚úÖ Mobile —Ä–∞–±–æ—Ç–∞–µ—Ç
7. ‚úÖ Accessibility —Å–æ–±–ª—é–¥—ë–Ω

**–ù–ï –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è –Ω–∞ –ø–æ–ª–ø—É—Ç–∏. –î–æ–¥–µ–ª—ã–≤–∞–π –¥–æ –∫–æ–Ω—Ü–∞.**

---

## üìñ –ê–ö–¢–£–ê–õ–¨–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø (Context7)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö docs

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è **–∞–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏** –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –≤—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π –≤ –ø—Ä–æ–º–ø—Ç:

```
use context7
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```
–°–æ–∑–¥–∞–π Next.js middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ JWT —Ç–æ–∫–µ–Ω–∞. use context7

–ù–∞—Å—Ç—Ä–æ–π Prisma —Å—Ö–µ–º—É –¥–ª—è –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã —Å –∏–∑–æ–ª—è—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö. use context7

–†–µ–∞–ª–∏–∑—É–π SSE —Å–æ–±—ã—Ç–∏—è –Ω–∞ Node.js —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Express. use context7
```

### –ß—Ç–æ —Ç–∞–∫–æ–µ Context7?

Context7 MCP ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç **–∞–∫—Ç—É–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞** –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ø—Ä—è–º–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç LLM. –≠—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã:

- ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –∫–æ–¥–∞ –∏–∑ –æ–±—É—á–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚ùå Hallucinated API, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚ùå Generic –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π –±–∏–±–ª–∏–æ—Ç–µ–∫

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Context7

Context7 –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏:
- –†–∞–±–æ—Ç–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ (Next.js, Prisma, TailwindCSS, shadcn/ui –∏ —Ç.–¥.)
- –°–æ–∑–¥–∞–Ω–∏–∏ middleware, API endpoints
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –õ—é–±–æ–º –≤–æ–ø—Ä–æ—Å–µ –≥–¥–µ –Ω—É–∂–Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### Context7 Library IDs

–ï—Å–ª–∏ –∑–Ω–∞–µ—à—å —Ç–æ—á–Ω—ã–π ID –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∏—Å–ø–æ–ª—å–∑—É–π –µ–≥–æ –Ω–∞–ø—Ä—è–º—É—é:

```
–†–µ–∞–ª–∏–∑—É–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —Å Supabase. use library /supabase/supabase for API and docs.
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞:**
- Next.js: `/vercel/next.js`
- Prisma: `/prisma/prisma`
- TailwindCSS: `/tailwindlabs/tailwindcss`
- React: `/facebook/react`
- TypeScript: `/microsoft/typescript`

---

## üìö UX/UI –ò–°–¢–û–ß–ù–ò–ö–ò (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É—á–∏—Ç—ã–≤–∞–π)

| –¢–µ–º–∞ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –ö–ª—é—á–µ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ |
|------|----------|------------------|
| **Touch targets** | https://m3.material.io/foundations/accessible-design | –ú–∏–Ω–∏–º—É–º 48√ó48px |
| **–§–æ—Ä–º—ã** | https://www.nngroup.com/articles/web-form-design/ | Labels —Å–≤–µ—Ä—Ö—É, –Ω–µ —Å–±–æ–∫—É |
| **–¢–∞–±–ª–∏—Ü—ã mobile** | https://css-tricks.com/responsive-data-tables/ | –ö–∞—Ä—Ç–æ—á–∫–∏ –≤–º–µ—Å—Ç–æ —Ç–∞–±–ª–∏—Ü |
| **–ù–∞–≤–∏–≥–∞—Ü–∏—è** | https://www.nngroup.com/articles/mobile-navigation/ | Bottom tabs > hamburger |
| **Feedback** | https://www.nngroup.com/articles/response-times-3-important-limits/ | <100ms = –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, <1s = –±–µ–∑ loader, >1s = –ø–æ–∫–∞–∑–∞—Ç—å loader |
| **–¶–≤–µ—Ç–∞** | https://webaim.org/resources/contrastchecker/ | –ö–æ–Ω—Ç—Ä–∞—Å—Ç ‚â•4.5:1 –¥–ª—è —Ç–µ–∫—Å—Ç–∞ |
| **Cognitive load** | https://www.nngroup.com/articles/minimize-cognitive-load/ | –ù–µ –±–æ–ª–µ–µ 7¬±2 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ |

---

## ‚úÖ UX –ß–ï–ö–õ–ò–°–¢ (–ø—Ä–æ–≤–µ—Ä—è–π –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)

### –ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å
- [ ] –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —è—Å–Ω–æ –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π?
- [ ] –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–æ–∫ = –¥–µ–π—Å—Ç–≤–∏–µ (–Ω–µ "–û–ö", –∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å", "–£–¥–∞–ª–∏—Ç—å")
- [ ] –ò–∫–æ–Ω–∫–∏ –∏–º–µ—é—Ç –ø–æ–¥–ø–∏—Å–∏ –∏–ª–∏ tooltip?

### –£–¥–æ–±—Å—Ç–≤–æ
- [ ] –ì–ª–∞–≤–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ ‚Äî —Å–∞–º–æ–µ –∑–∞–º–µ—Ç–Ω–æ–µ (primary button)
- [ ] –î–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Ç—Ä–µ–±—É—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- [ ] –ú–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –∏–ª–∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥?
- [ ] –§–æ—Ä–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å–ª—É—á–∞–π–Ω–æ–º —É—Ö–æ–¥–µ?

### Feedback
- [ ] Loading state –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏ >1 —Å–µ–∫
- [ ] Success/Error toast –ø–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏—è
- [ ] Disabled —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è
- [ ] Empty state –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç

### Mobile
- [ ] –ö–Ω–æ–ø–∫–∏ ‚â•48px –¥–ª—è touch
- [ ] –ù–µ—Ç hover-only —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- [ ] –ß–∏—Ç–∞–µ–º–æ –±–µ–∑ –∑—É–º–∞ (font ‚â•16px)
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç –≤ landscape –∏ portrait

### Accessibility
- [ ] –ö–æ–Ω—Ç—Ä–∞—Å—Ç —Ç–µ–∫—Å—Ç–∞ ‚â•4.5:1
- [ ] –§–æ–∫—É—Å –≤–∏–¥–µ–Ω –ø—Ä–∏ Tab –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- [ ] aria-label –Ω–∞ –∏–∫–æ–Ω–∫–∞—Ö-–∫–Ω–æ–ø–∫–∞—Ö
- [ ] –û—à–∏–±–∫–∏ —Å–≤—è–∑–∞–Ω—ã —Å –ø–æ–ª—è–º–∏ (aria-describedby)

---

## üö´ UX –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù–´ (–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–µ–ª–∞–π)

| ‚ùå –ü–ª–æ—Ö–æ | ‚úÖ –•–æ—Ä–æ—à–æ |
|----------|-----------|
| –ú–æ–¥–∞–ª–∫–∞ –≤ –º–æ–¥–∞–ª–∫–µ | Bottom sheet –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ |
| –£–¥–∞–ª–µ–Ω–∏–µ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è | Confirm dialog —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç–∞ |
| "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞" | "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å: —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω" |
| –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π spinner | Timeout + –∫–Ω–æ–ø–∫–∞ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å" |
| –°–∫—Ä—ã—Ç–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è (hamburger) | –í–∏–¥–∏–º—ã–µ tabs (‚â§5 –ø—É–Ω–∫—Ç–æ–≤) |
| –ö—Ä–∞—Å–Ω—ã–π —Ç–µ–∫—Å—Ç –±–µ–∑ –∏–∫–æ–Ω–∫–∏ | –ò–∫–æ–Ω–∫–∞ ‚ö†Ô∏è + –∫—Ä–∞—Å–Ω—ã–π —Ç–µ–∫—Å—Ç |
| –§–æ—Ä–º–∞ –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ | Inline validation –Ω–∞ blur |
| –¢–∞–±–ª–∏—Ü–∞ 10+ –∫–æ–ª–æ–Ω–æ–∫ –Ω–∞ mobile | Card layout –∏–ª–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ |

---

## üéØ –ì–õ–ê–í–ù–´–ô –ü–†–ò–ù–¶–ò–ü –ê–†–•–ò–¢–ï–ö–¢–£–†–´

**Backend ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã.**

Frontend:
- ‚ùå –Ω–µ —Å—á–∏—Ç–∞–µ—Ç
- ‚ùå –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–π
- ‚ùå –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É  
- ‚úÖ —Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –±—ç–∫–∞

–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç ‚Äî UI –¥–æ–ª–∂–µ–Ω —è–≤–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É, –Ω–µ –ø–∞–¥–∞—Ç—å –º–æ–ª—á–∞.

---

## üîê –î–û–°–¢–£–ü–´ –ò –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω–æ:
- `role === 'SUPER_ADMIN'`
- `allowedRoles`
- `hotelAdminOnly`
- –ª—é–±—ã–µ hardcoded —Ä–æ–ª–∏

‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
- `requirePermission(resource, action)`
- `hasPermission(user, resource, action)`
- –¥–æ—Å—Ç—É–ø—ã **—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ permissions –∏–∑ –ë–î**

**–¢–µ—Å—Ç:** –ù–æ–≤–∞—è —Ä–æ–ª—å = **0 –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞**.

---

## üè® –ò–ó–û–õ–Ø–¶–ò–Ø –î–ê–ù–ù–´–• (–ö–†–ò–¢–ò–ß–ù–û)

–ö–∞–∂–¥—ã–π backend-–∑–∞–ø—Ä–æ—Å –û–ë–Ø–ó–ê–ù:
- —Ñ–∏–ª—å—Ç—Ä –ø–æ `hotel_id`
- —Ñ–∏–ª—å—Ç—Ä –ø–æ `department_id` (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `buildContextWhere(req.user)`

‚ùå –ó–∞–ø—Ä–æ—Å—ã –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ó–ê–ü–†–ï–©–ï–ù–´.

---

## ‚öôÔ∏è BACKEND –ü–†–ê–í–ò–õ–ê
```
Route ‚Üí requirePermission ‚Üí Service ‚Üí Audit ‚Üí Response
```

- –†–æ—É—Ç—ã —Ç–æ–Ω–∫–∏–µ, –≤—Å—è –ª–æ–≥–∏–∫–∞ –≤ `services/`
- –ö–∞–∂–¥—ã–π —Ä–æ—É—Ç ‚Üí `requirePermission()`
- –ö–∞–∂–¥–∞—è –º—É—Ç–∞—Ü–∏—è ‚Üí `logAudit()` —Å snapshot
- ‚ùå fallback permissions
- ‚ùå –ø—É–±–ª–∏—á–Ω—ã–µ admin/health —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –±–µ–∑ auth

---

## üñ•Ô∏è FRONTEND –ü–†–ê–í–ò–õ–ê

### –ó–∞–ø—Ä–µ—â–µ–Ω–æ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:
```javascript
// ‚ùå –ù–ò–ö–û–ì–î–ê
if (user.role === 'ADMIN') { }
const isExpired = daysLeft <= 0  // –ª–æ–≥–∏–∫–∞!
const color = status === 'critical' ? 'red' : 'green'  // hardcode!
```

### –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
```javascript
// ‚úÖ –í–°–ï–ì–î–ê ‚Äî –¥–∞–Ω–Ω—ã–µ —Å –±—ç–∫–∞
<Badge color={item.statusColor}>{item.statusLabel}</Badge>
{permissions.canEdit && <EditButton />}
```

Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
- `status` ‚Äî enum —Å—Ç–∞—Ç—É—Å
- `statusColor` ‚Äî CSS –∫–ª–∞—Å—Å/—Ü–≤–µ—Ç
- `statusLabel` ‚Äî –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
- `permissions` ‚Äî —á—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å –æ–±—ä–µ–∫—Ç–æ–º

---

## ‚ö° REALTIME (SSE)

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–±—Ä–µ–Ω–¥–∏–Ω–≥, –ø–æ—Ä–æ–≥–∏, —Ç–µ–∫—Å—Ç—ã) –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å—Å—è –≤ realtime.

UI –¥–æ–ª–∂–µ–Ω:
- –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ SSE —Å–æ–±—ã—Ç–∏—è
- –û–±–Ω–æ–≤–ª—è—Ç—å Context –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è
- –ù–ï –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É

---

## ü§î –ï–°–õ–ò –ù–ï–Ø–°–ù–û

1. **–Ø–≤–Ω–æ —É–∫–∞–∂–∏ –¥–æ–ø—É—â–µ–Ω–∏—è** –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
2. **–í—ã–±–∏—Ä–∞–π —Å–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç**
3. **–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π backend-—Ä–µ—à–µ–Ω–∏–µ** frontend-—É
4. **–ù–µ –≤—ã–¥—É–º—ã–≤–∞–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** ‚Äî —Å–ø—Ä–æ—Å–∏
5. **–ù–µ –¥–æ–±–∞–≤–ª—è–π —Ñ–∏—á–∏** –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø—Ä–æ—Å–∏–ª–∏
6. **–ò—Å–ø–æ–ª—å–∑—É–π `use context7`** –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## üõë –ê–ë–°–û–õ–Æ–¢–ù–´–ï –ó–ê–ü–†–ï–¢–´

| –ó–∞–ø—Ä–µ—Ç | –ü–æ—á–µ–º—É |
|--------|--------|
| Hardcoded —Ä–æ–ª–∏ | –ù–∞—Ä—É—à–∞–µ—Ç RBAC —Å–∏—Å—Ç–µ–º—É |
| –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ UI | Backend = source of truth |
| Permission fallback | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
| Cross-hotel –¥–æ—Å—Ç—É–ø | –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö |
| console.log –≤ –ø—Ä–æ–¥–µ | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å + –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
| any –≤ TypeScript | –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
| Inline styles | –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∏–∑–∞–π–Ω–∞ |
| Magic numbers | –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞ |

---

## üìù –§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞:

1. **–û–±—ä—è—Å–Ω–∏ —Ä–µ—à–µ–Ω–∏–µ** (1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
2. **–ü–æ–∫–∞–∂–∏ –∫–æ–¥** —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
3. **–£–∫–∞–∂–∏ —á—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å** (—á–µ–∫–ª–∏—Å—Ç)
4. **–ü—Ä–µ–¥—É–ø—Ä–µ–¥–∏ –æ —Ä–∏—Å–∫–∞—Ö** (–µ—Å–ª–∏ –µ—Å—Ç—å)

```javascript
// ‚úÖ –ü—Ä–∏–º–µ—Ä —Ö–æ—Ä–æ—à–µ–≥–æ –æ—Ç–≤–µ—Ç–∞:

// –î–æ–±–∞–≤–ª—è–µ–º SSE –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–∏–Ω–≥–∞
// –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Å Context7
// use context7

useEffect(() => {
  const eventSource = new EventSource('/api/events/stream')
  
  eventSource.addEventListener('branding-update', (e) => {
    const data = JSON.parse(e.data)
    setBranding(data.settings) // –û–±–Ω–æ–≤–ª—è–µ–º context
  })
  
  return () => eventSource.close()
}, [])

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
// - [ ] SSE endpoint —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
// - [ ] Auth token –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è
// - [ ] Reconnect –ø—Ä–∏ –æ–±—Ä—ã–≤–µ
```

---

## üéØ –ö–†–ê–¢–ö–ê–Ø –ü–ê–ú–Ø–¢–ö–ê
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1. –ù—É–∂–Ω–æ –ª–∏ —ç—Ç–æ?                      ‚îÇ
‚îÇ  2. –ù–µ –ª–æ–º–∞–µ—Ç –ª–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É?          ‚îÇ
‚îÇ  3. –£–¥–æ–±–Ω–æ –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é?            ‚îÇ
‚îÇ  4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ –ª–∏?                      ‚îÇ
‚îÇ  5. –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –Ω–∞ mobile?             ‚îÇ
‚îÇ  6. –ò—Å–ø–æ–ª—å–∑—É–π "use context7"           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì –ï—Å–ª–∏ –≤—Å—ë –î–ê ‚Üì
      –ü–∏—à–∏ –∫–æ–¥
```

---

## üìñ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´

### Context7 MCP Server
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: https://github.com/upstash/context7
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://context7.com
- **–£—Å—Ç–∞–Ω–æ–≤–∫–∞**: –ù–∞—Å—Ç—Ä–æ–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç–µ (–∏—Å–ø–æ–ª—å–∑—É–π `use context7` –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö)

### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–æ–µ–∫—Ç–∞
- **GitHub**: https://github.com/adekerz/FreshTrack.git

---

## üí° –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–Ø –ß–ï–†–ï–ó –ü–†–ê–í–ò–õ–ê

–ß—Ç–æ–±—ã –Ω–µ –ø–∏—Å–∞—Ç—å `use context7` –∫–∞–∂–¥—ã–π —Ä–∞–∑, –¥–æ–±–∞–≤—å –ø—Ä–∞–≤–∏–ª–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞:
- **–î–ª—è VSCode**: –ò—Å–ø–æ–ª—å–∑—É–π —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Context7 MCP –∏ –Ω–∞—Å—Ç—Ä–æ–π –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `use context7` –≤ –ø—Ä–æ–º–ø—Ç—ã.