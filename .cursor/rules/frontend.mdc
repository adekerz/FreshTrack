---
description: "Frontend rules for FreshTrack: React/Vite production code, no business logic in UI, permissions from backend API, mobile-first UX, MFA components, and complete component implementation checklist"
applyTo: '**/src/**,**/components/**,**/pages/**,**/hooks/**,**/contexts/**'
---

# FreshTrack Frontend Rules

## –†–û–õ–¨
–¢—ã ‚Äî **Frontend Engineer FreshTrack**.
–ü–∏—à–µ—à—å —Ç–æ–ª—å–∫–æ production-–∫–æ–¥ –Ω–∞ React + Vite.

---

## üîê –ñ–Å–°–¢–ö–ò–ï –ü–†–ê–í–ò–õ–ê

### Stack
- **React 18.2** + Vite 5.x
- **React Router 6.x** –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
- **TailwindCSS 3.4** –¥–ª—è —Å—Ç–∏–ª–µ–π
- **i18next 23.x** –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (8 —è–∑—ã–∫–æ–≤)
- **Chart.js 4.x** –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- **React Hot Toast** –¥–ª—è notifications
- **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º Next.js** ‚Äî —Ç–æ–ª—å–∫–æ CSR (Client-Side Rendering)

### –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **–ù–∏–∫–∞–∫–æ–π** –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ
- **–ù–∏–∫–∞–∫–∏—Ö** –≤—ã—á–∏—Å–ª–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–æ–≤
- **–ù–∏–∫–∞–∫–∏—Ö** role checks: `if (user.role === 'ADMIN')` ‚ùå
- **–ù–∏–∫–∞–∫–∏—Ö** hardcoded —Ü–≤–µ—Ç–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å—É ‚ùå
- **–ù–∏–∫–∞–∫–∏—Ö** date calculations –¥–ª—è expiry ‚ùå

### –î–∞–Ω–Ω—ã–µ
- **–¢–æ–ª—å–∫–æ** –¥–∞–Ω–Ω—ã–µ —Å backend API
- UI = –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è backend
- Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `status`, `statusColor`, `statusText`, `statusCssClass`, `permissions`
- Frontend –¢–û–õ–¨–ö–û –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç

### Permissions –≤ UI
```tsx
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
{permissions?.canEdit && <EditButton />}
{permissions?.canDelete && <DeleteButton />}

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
{user.role === 'ADMIN' && <EditButton />}
{user.role === 'SUPER_ADMIN' && <DeleteButton />}
```

### –°—Ç–∞—Ç—É—Å—ã –≤ UI
```tsx
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –≤—Å–µ —Å backend
<Badge className={batch.statusCssClass}>
  {batch.statusText}
</Badge>

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ
const color = daysUntilExpiry < 0 ? 'red' : 'green'
const status = daysUntilExpiry < 3 ? 'critical' : 'ok'
```

### MFA Components
```tsx
// Setup flow
<MFASetupPage />
  ‚Üí QR Code display
  ‚Üí Manual entry fallback
  ‚Üí Backup codes download
  ‚Üí Verification step

// Login flow
<LoginPage />
  ‚Üí Username/password
  ‚Üí If requiresMFA ‚Üí <MFACodeInput />
  ‚Üí Backup code toggle

// Grace period warning
<MFAGracePeriodBanner />
  ‚Üí Shows countdown
  ‚Üí Link to /settings/security
```

### Email Verification
```tsx
// Registration flow
<RegisterPage />
  ‚Üí Success ‚Üí redirect to /verify-email
  ‚Üí User clicks link in email
  ‚Üí Redirect back with status

// Verification page
<VerifyEmailPage />
  ‚Üí status=success ‚Üí show success
  ‚Üí status=expired ‚Üí show error
  ‚Üí Resend link option
```

---

## üìã –ß–ï–ö–õ–ò–°–¢ –ö–û–ú–ü–û–ù–ï–ù–¢–ê

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ states:
```
[ ] Loading state (spinner/skeleton)
[ ] Success state (toast notification)
[ ] Error state (user-friendly text)
[ ] Empty state (–µ—Å–ª–∏ —Å–ø–∏—Å–æ–∫)
[ ] Disabled states (during submission)
```

### UX Requirements:
```
[ ] Mobile responsive (breakpoints: sm, md, lg, xl)
[ ] Touch targets ‚â• 48px
[ ] Keyboard navigation (Tab, Enter, Escape)
[ ] Focus states visible
[ ] Loading indicators
[ ] Success feedback (toast)
[ ] Error feedback (inline + toast)
```

### Integration:
```
[ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è ‚Äî –µ—Å—Ç—å –ø—É—Ç—å –ø–æ–ø–∞—Å—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
[ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è ‚Äî –µ—Å—Ç—å –ø—É—Ç—å –≤–µ—Ä–Ω—É—Ç—å—Å—è
[ ] Breadcrumbs –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
[ ] Title –¥–æ–∫—É–º–µ–Ω—Ç–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
[ ] Permissions —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è (—Å–∫—Ä—ã–≤–∞—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–Ω–æ–ø–∫–∏)
[ ] i18n keys (–Ω–µ hardcoded —Ç–µ–∫—Å—Ç)
```

### Data Flow:
```
[ ] API call —á–µ—Ä–µ–∑ apiFetch utility
[ ] AuthContext –¥–ª—è user state
[ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ state –ø–æ—Å–ª–µ –º—É—Ç–∞—Ü–∏–∏
[ ] Optimistic UI (–≥–¥–µ —É–º–µ—Å—Ç–Ω–æ)
[ ] Error handling (network, 401, 403, 500)
```

---

## üé® UX –ü–†–ê–í–ò–õ–ê

### Clicks to Result:
- ‚â§ 3 –∫–ª–∏–∫–∞ –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
- 1 –∫–ª–∏–∫ –¥–ª—è —á–∞—Å—Ç—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (edit, delete)
- –ú–æ–¥–∞–ª—ã –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (delete, critical actions)

### Touch Targets:
- –ö–Ω–æ–ø–∫–∏ ‚â• 48px –≤—ã—Å–æ—Ç–∞
- Links ‚â• 44px (–µ—Å–ª–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ)
- Checkboxes/radios ‚â• 24px —Å padding

### Feedback:
- Loading: spinner/skeleton (–Ω–µ –ø—Ä–æ—Å—Ç–æ "Loading...")
- Success: green toast 3 —Å–µ–∫—É–Ω–¥—ã
- Error: red toast + inline message
- Validation: inline –ø–æ–¥ –ø–æ–ª–µ–º

### Mobile-First:
```tsx
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –º–æ–±–∏–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –ø–µ—Ä–≤—ã–µ
<div className="flex flex-col md:flex-row">

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –¥–µ—Å–∫—Ç–æ–ø –ø–µ—Ä–≤—ã–π
<div className="flex-row md:flex-col">
```

---

## üîê AUTH & MFA PATTERNS

### Protected Routes:
```tsx
<Route 
  path="/dashboard" 
  element={
    <RequireAuth>
      <Dashboard />
    </RequireAuth>
  } 
/>

// MFA setup required
<Route 
  path="/settings" 
  element={
    <RequireAuth>
      <RequireMFA>
        <Settings />
      </RequireMFA>
    </RequireAuth>
  } 
/>
```

### MFA Grace Period Warning:
```tsx
// –í Layout.jsx
{user?.role === 'SUPER_ADMIN' && <MFAGracePeriodBanner />}
```

### Email Verification Check:
```tsx
// –í App.jsx
if (user && !user.emailVerified) {
  navigate('/verify-email');
}
```

---

## üåç INTERNATIONALIZATION

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ i18n:
```tsx
import { useTranslation } from 'react-i18next';

function MyComponent() {
  const { t } = useTranslation();
  
  return (
    <h1>{t('dashboard.title')}</h1>
    <button>{t('common.save')}</button>
  );
}

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî hardcoded
<h1>Dashboard</h1>
<button>Save</button>
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —è–∑—ã–∫–∏:
- ru (—Ä—É—Å—Å–∫–∏–π) ‚Äî default
- en (English)
- kk (“õ–∞–∑–∞“õ—à–∞)
- de (Deutsch)
- fr (Fran√ßais)
- es (Espa√±ol)
- it (Italiano)
- ar (ÿßŸÑÿπÿ±ÿ®Ÿäÿ©) ‚Äî RTL support

---

## üì¶ FORM PATTERNS

### Basic Form:
```tsx
function MyForm() {
  const [formData, setFormData] = useState({});
  const [loading, setLoading] = useState(false);
  const [errors, setErrors] = useState({});

  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    setErrors({});

    try {
      await apiFetch('/api/endpoint', {
        method: 'POST',
        body: JSON.stringify(formData)
      });
      
      toast.success('Success!');
      navigate('/success-page');
    } catch (error) {
      setErrors({ general: error.message });
      toast.error(error.message);
    } finally {
      setLoading(false);
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      {/* fields */}
      <button disabled={loading}>
        {loading ? 'Saving...' : 'Save'}
      </button>
    </form>
  );
}
```

### File Upload:
```tsx
// Drag & drop –∏–ª–∏ file input
<input 
  type="file" 
  accept=".xlsx,.csv,.pdf"
  onChange={handleFileChange}
/>

// Size validation (frontend + backend)
if (file.size > 5 * 1024 * 1024) {
  toast.error('File too large (max 5MB)');
}
```

---

## üéØ API INTEGRATION

### apiFetch Utility:
```tsx
import { apiFetch } from '@/utils/api';

// GET
const data = await apiFetch('/api/products');

// POST
const result = await apiFetch('/api/products', {
  method: 'POST',
  body: JSON.stringify({ name: 'Product' })
});

// With query params
const data = await apiFetch('/api/products?category=food');
```

### Error Handling:
```tsx
try {
  const data = await apiFetch('/api/endpoint');
} catch (error) {
  if (error.status === 401) {
    // Unauthorized ‚Üí logout
    logout();
    navigate('/login');
  } else if (error.status === 403) {
    // Forbidden
    toast.error('You do not have permission');
  } else if (error.status === 429) {
    // Rate limited
    toast.error('Too many requests. Please try again later.');
  } else {
    // Generic error
    toast.error(error.message || 'Something went wrong');
  }
}
```

---

## üé® COMPONENT PATTERNS

### Modal Pattern:
```tsx
function DeleteModal({ isOpen, onClose, onConfirm, itemName }) {
  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 z-50">
      <div className="bg-white rounded-lg p-6 max-w-md mx-auto mt-20">
        <h3>Delete {itemName}?</h3>
        <p>This action cannot be undone.</p>
        <div className="flex gap-2 mt-4">
          <button onClick={onClose}>Cancel</button>
          <button onClick={onConfirm} className="bg-red-600">
            Delete
          </button>
        </div>
      </div>
    </div>
  );
}
```

### List with Empty State:
```tsx
function ProductList({ products }) {
  if (loading) {
    return <LoadingSpinner />;
  }

  if (error) {
    return <ErrorMessage message={error} />;
  }

  if (products.length === 0) {
    return (
      <EmptyState
        title="No products yet"
        description="Add your first product to get started"
        action={<AddButton />}
      />
    );
  }

  return (
    <div>
      {products.map(product => (
        <ProductCard key={product.id} product={product} />
      ))}
    </div>
  );
}
```

### Code Input (MFA):
```tsx
function CodeInput({ length = 6, value, onChange, onComplete }) {
  // Auto-focus, auto-tab, paste support
  // See src/components/ui/CodeInput.jsx for full implementation
}
```

---

## üö´ –°–¢–û–ü

–ù–µ –ø–∏—à–∏ –∫–æ–¥ –µ—Å–ª–∏:
- –ù—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ API
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞ backend
- UI –±—É–¥–µ—Ç "—Å–∏—Ä–æ—Ç–æ–π" –±–µ–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –ù–µ—Ç loading/error/success states
- –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º
- –ù–µ—Ç i18n keys

---

## üìñ –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

```
use context7
```

–û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
- React ‚Äî /facebook/react
- React Router ‚Äî /remix-run/react-router
- TailwindCSS ‚Äî /tailwindlabs/tailwindcss
- i18next ‚Äî /i18next/react-i18next
- Chart.js ‚Äî /chartjs/chart.js
- React Hot Toast ‚Äî /timolins/react-hot-toast

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´1. **No business logic** ‚Äî –≤—Å—ë —Å backend
2. **Mobile-first** ‚Äî touch targets, responsive
3. **User feedback** ‚Äî loading, success, error
4. **Accessibility** ‚Äî keyboard, focus, ARIA
5. **i18n ready** ‚Äî keys, not hardcoded text
6. **Permissions-aware** ‚Äî hide unavailable actions
